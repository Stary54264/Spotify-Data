---
title: "Spotify Data"
author: "Yanzun Jiang, "
date: today
date-format: long
format: pdf
number-sections: true
toc: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

# load packages and read data
library(tidyverse)
library(knitr)
```

\newpage

# Introduction

To conduct the analysis of songs on Spotify, a dataset downloaded from @spotify was utilized, as described in @sec-data. Based on the initial findings, it was observed that higher air temperatures are correlated with higher water temperatures, while higher water temperatures coincided with an increase in waterfowl activity in some extent(@sec-discussion). Also, supplementary insights are provided in @sec-appendix.

# Data {#sec-data}

```{r}
#| include: false
#| warning: false
#| message: false

data <- read_csv(here::here("data/analysis_data/analysis_data.csv"))
```

## Overview

The dataset used in this analysis is the songs of David Tao sourced from Spotify (@spotify). It records various aspects of the songs by David from 1997 to present.

The variables analyzed in this study are listed below:

`album_release_date`: the date that the album was released.

`energy`: the energy of the song.

`key`: the main key of the song.

`valence`: the degree of happiness of the song.

`tempo`: the pace of the song.

The dataset was accessed using the `spotifyr` package (@spotifyr). For the analysis, the R programming language was employed (@r), utilizing the `tidyverse` (@tidyverse) package for data cleaning, transformation, visualization, the `knitr` package to visualize the data, and the `here` package (@here) accessing the data in this analysis. Afterward, the cleaned dataset was processed and tested using additional functions from the `tidyverse` package (@tidyverse).

## Preview of the Dataset

This (@tbl-data) is the preview of the dataset.

```{r}
#| label: tbl-data
#| tbl-cap: Preview of Data
#| echo: false
#| warning: false
#| message: false

kable(head(data), format = "markdown")
```

# Discussion {#sec-discussion}

```{r}
#| label: fig-water-fowl
#| fig-cap: Changes of Energy with Time in David's Songs
#| echo: false
#| warning: false
#| message: false

data |>
  ggplot(aes(x = album_release_date, y = energy)) +
  geom_point(col = "lightblue") +
  geom_smooth() +
  theme_minimal() +
  labs(x = "Date Released", y = "Number of Waterfowl Observed")
```

\newpage

\appendix

# Appendix {#sec-appendix}

## Data Cleaning

The data cleaning process involved tidying the dates, filtering out useless columns from the raw dataset, and filtering out observations with NAs.

## Summary Statistics of the Data

The summary statistics provides key statistical insights into the environmental variables analyzed at Toronto beaches. For each variable, the summarize tables (@tbl-summarise-air, @tbl-summarise-water, and @tbl-summarise-fowl) reports the mean, median, variance, minimum value, maximum value, and interquartile range of those vairables, offering a concise overview of range, central tendencies, and variability in the data.


\newpage

# References
